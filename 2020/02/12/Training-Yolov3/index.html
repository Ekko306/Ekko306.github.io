<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: black; /*è¿›åº¦æ¡é¢œè‰²*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*é˜´å½±é¢œè‰²*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*ä¸Šè¾¹æ¡†é¢œè‰²*/
        border-left-color: #1E92FB;    /*å·¦è¾¹æ¡†é¢œè‰²*/
    }
</style>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰ æ€»ç»“æ•´ä¸ªæ·±åº¦å­¦ä¹ çš„æµç¨‹ï¼Œæ•°æ®é›†-&amp;gt;æ¨¡å‹è®­ç»ƒ-&amp;gt;éƒ¨ç½²æ¨¡å‹ã€‚  æ•°æ®é›†æƒ³è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†å°±å¿…é¡»å­¦ä¼šå¦‚ä½•æ ‡æ³¨æ ·æœ¬åšç›®æ ‡æ£€æµ‹ã€‚ ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“æ•°æ®é›†å¸¸ç”¨æ ¼å¼ï¼š  PASCAL VOC COCO YOLO  PASCAL VOC vocæ•°æ®é›†æ˜¯ç”±PASCAL VOCç«èµ›å‘èµ·ã€‚PASCAL VOCç«èµ›ç›®æ ‡ä¸»è¦æ˜¯ç›®æ ‡è¯†åˆ«ï¼Œå…¶æä¾›çš„æ•°æ®é›†é‡ŒåŒ…å«äº†20ç±»çš„ç‰©ä½“ã€‚ä½¿">
<meta property="og:type" content="article">
<meta property="og:title" content="Training Yolov3">
<meta property="og:url" content="http://yoursite.com/2020/02/12/Training-Yolov3/index.html">
<meta property="og:site_name" content="SYPeng">
<meta property="og:description" content="è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰ æ€»ç»“æ•´ä¸ªæ·±åº¦å­¦ä¹ çš„æµç¨‹ï¼Œæ•°æ®é›†-&amp;gt;æ¨¡å‹è®­ç»ƒ-&amp;gt;éƒ¨ç½²æ¨¡å‹ã€‚  æ•°æ®é›†æƒ³è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†å°±å¿…é¡»å­¦ä¼šå¦‚ä½•æ ‡æ³¨æ ·æœ¬åšç›®æ ‡æ£€æµ‹ã€‚ ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“æ•°æ®é›†å¸¸ç”¨æ ¼å¼ï¼š  PASCAL VOC COCO YOLO  PASCAL VOC vocæ•°æ®é›†æ˜¯ç”±PASCAL VOCç«èµ›å‘èµ·ã€‚PASCAL VOCç«èµ›ç›®æ ‡ä¸»è¦æ˜¯ç›®æ ‡è¯†åˆ«ï¼Œå…¶æä¾›çš„æ•°æ®é›†é‡ŒåŒ…å«äº†20ç±»çš„ç‰©ä½“ã€‚ä½¿">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/yolo.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/labelimg.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/datasets.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/data.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/cfg.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/cards_data.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/log.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/predictions.jpg">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/png.png">
<meta property="og:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/dnn.png">
<meta property="og:updated_time" content="2020-02-12T13:09:40.057Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Training Yolov3">
<meta name="twitter:description" content="è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰ æ€»ç»“æ•´ä¸ªæ·±åº¦å­¦ä¹ çš„æµç¨‹ï¼Œæ•°æ®é›†-&amp;gt;æ¨¡å‹è®­ç»ƒ-&amp;gt;éƒ¨ç½²æ¨¡å‹ã€‚  æ•°æ®é›†æƒ³è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†å°±å¿…é¡»å­¦ä¼šå¦‚ä½•æ ‡æ³¨æ ·æœ¬åšç›®æ ‡æ£€æµ‹ã€‚ ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“æ•°æ®é›†å¸¸ç”¨æ ¼å¼ï¼š  PASCAL VOC COCO YOLO  PASCAL VOC vocæ•°æ®é›†æ˜¯ç”±PASCAL VOCç«èµ›å‘èµ·ã€‚PASCAL VOCç«èµ›ç›®æ ‡ä¸»è¦æ˜¯ç›®æ ‡è¯†åˆ«ï¼Œå…¶æä¾›çš„æ•°æ®é›†é‡ŒåŒ…å«äº†20ç±»çš„ç‰©ä½“ã€‚ä½¿">
<meta name="twitter:image" content="http://yoursite.com/2020/02/12/Training-Yolov3/yolo.png">
  <link rel="canonical" href="http://yoursite.com/2020/02/12/Training-Yolov3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Training Yolov3 | SYPeng</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SYPeng</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/12/Training-Yolov3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æœ›æ˜Ÿçš„å¤ªé˜³èŠ±">
      <meta itemprop="description" content="You are my JavaSript in my HTML.">
      <meta itemprop="image" content="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1570163730249&di=dcd36b04d1066a90ddb1f132ae3a6bcc&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Ffe60497fd762440686b6d5702c2c9f19df71fb9911009-LVWEJj_fw658">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SYPeng">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Training Yolov3

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-12 09:30:41 / ä¿®æ”¹æ—¶é—´ï¼š21:09:40" itemprop="dateCreated datePublished" datetime="2020-02-12T09:30:41+08:00">2020-02-12</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Deep-Learning/" itemprop="url" rel="index"><span itemprop="name">Deep-Learning</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰"><a href="#è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰" class="headerlink" title="è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰"></a>è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰</h1><blockquote>
<p><strong>æ€»ç»“</strong>æ•´ä¸ªæ·±åº¦å­¦ä¹ çš„æµç¨‹ï¼Œæ•°æ®é›†-&gt;æ¨¡å‹è®­ç»ƒ-&gt;éƒ¨ç½²æ¨¡å‹ã€‚</p>
</blockquote>
<h2 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h2><p>æƒ³è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†å°±å¿…é¡»å­¦ä¼šå¦‚ä½•æ ‡æ³¨æ ·æœ¬åšç›®æ ‡æ£€æµ‹ã€‚</p>
<h3 id="ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“"><a href="#ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“" class="headerlink" title="ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“"></a>ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“</h3><p>æ•°æ®é›†å¸¸ç”¨æ ¼å¼ï¼š</p>
<ul>
<li>PASCAL VOC</li>
<li>COCO</li>
<li>YOLO</li>
</ul>
<h4 id="PASCAL-VOC"><a href="#PASCAL-VOC" class="headerlink" title="PASCAL VOC"></a>PASCAL VOC</h4><blockquote>
<p>vocæ•°æ®é›†æ˜¯ç”±PASCAL VOCç«èµ›å‘èµ·ã€‚PASCAL VOCç«èµ›ç›®æ ‡ä¸»è¦æ˜¯ç›®æ ‡è¯†åˆ«ï¼Œå…¶æä¾›çš„æ•°æ®é›†é‡ŒåŒ…å«äº†20ç±»çš„ç‰©ä½“ã€‚ä½¿ç”¨xmlæ–‡ä»¶æ ‡æ³¨ã€‚</p>
</blockquote>
<p>è¯¦è§£ï¼š<a href="https://blog.csdn.net/pxh_ww/article/details/98961168" target="_blank" rel="noopener">https://blog.csdn.net/pxh_ww/article/details/98961168</a></p>
<h4 id="COCO"><a href="#COCO" class="headerlink" title="COCO"></a>COCO</h4><blockquote>
<p>COCOæ•°æ®é›†æ˜¯ä¸€ä¸ªå¤§å‹çš„ã€ä¸°å¯Œçš„ç‰©ä½“æ£€æµ‹ï¼Œåˆ†å‰²å’Œå­—å¹•æ•°æ®é›†ã€‚è¿™ä¸ªæ•°æ®é›†ä»¥scene understandingä¸ºç›®æ ‡ï¼Œä¸»è¦ä»å¤æ‚çš„æ—¥å¸¸åœºæ™¯ä¸­æˆªå–ï¼Œå›¾åƒä¸­çš„ç›®æ ‡é€šè¿‡ç²¾ç¡®çš„segmentationè¿›è¡Œä½ç½®çš„æ ‡å®šã€‚ä½¿ç”¨jsonæ–‡ä»¶æ ‡æ³¨ã€‚</p>
</blockquote>
<p>è¯¦è§£ï¼š<a href="https://blog.csdn.net/fireflychh/article/details/83040205" target="_blank" rel="noopener">https://blog.csdn.net/fireflychh/article/details/83040205</a></p>
<h4 id="YOLO"><a href="#YOLO" class="headerlink" title="YOLO"></a>YOLO</h4><blockquote>
<p>YOLOæ ¼å¼ç”¨äºYOLOæ¨¡å‹çš„æ£€æµ‹ã€‚ä½¿ç”¨txtæ–‡ä»¶æ ‡æ³¨ã€‚</p>
</blockquote>
<img src="/2020/02/12/Training-Yolov3/yolo.png" width="400" height="250" alt="å›¾ç‰‡åç§°" align="center">

<h3 id="ä½¿ç”¨labelImageæ ‡æ³¨"><a href="#ä½¿ç”¨labelImageæ ‡æ³¨" class="headerlink" title="ä½¿ç”¨labelImageæ ‡æ³¨"></a>ä½¿ç”¨labelImageæ ‡æ³¨</h3><p>ä½¿ç”¨æ ‡æ³¨å·¥å…·æ ‡æ³¨è‡ªå·±çš„å›¾ç‰‡ï¼Œåº”ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œä¸‹è½½githubä»£ç è¿è¡Œåï¼Œä¸€çœ‹å°±ä¼šç”¨ã€‚æ”¯æŒå¯¼å‡ºPASCAL VOCå’ŒYOLOä¸¤ç§æ ¼å¼<br><img src="/2020/02/12/Training-Yolov3/labelimg.png" width="700" height="350" alt="å›¾ç‰‡åç§°" align="center"><br>ï¼ˆä¸ºæ–¹ä¾¿ï¼Œå¯å…ˆå®šä¹‰æ ¹ç›®å½•ä¸‹dataæ–‡ä»¶çš„predefined_classes.txtï¼‰</p>
<hr>
<p>è‹¥æ ¼å¼éœ€æ±‚ä¸åŒä¹Ÿå¯ä»¥ç”¨æ•´ç†å¥½çš„datasetså·¥å…·ï¼š<br><img src="/2020/02/12/Training-Yolov3/datasets.png" width="800" height="350" alt="å›¾ç‰‡åç§°" align="center"><br>ä¸»è¦æ˜¯ä½¿ç”¨æ¯ä¸ªå·¥å…·é…ç½®ä¸€ä¸‹æ–‡ä»¶è·¯å¾„ï¼Œæ¯”å¦‚é…ç½®voc_to_yolo_cfg.py<br>åŒæ—¶è¿˜æœ‰å•¥æ ·æœ¬åˆ†å‰²çš„å·¥å…·åœ¨utilsç›®å½•ä¸‹ã€‚<br>æœ€åæŒ‰ç…§ä¸åŒæ¡†æ¶éœ€æ±‚çš„æ•°æ®é›†ä½¿ç”¨å°±å¯ä»¥è®­ç»ƒæ•°æ®é›†äº†ã€‚ï¼ˆä»¥ä¸‹yoloä¾‹å­ï¼‰<br><a href="https://github.com/pjreddie/darknet" target="_blank" rel="noopener">https://github.com/pjreddie/darknet</a></p>
<h2 id="æ¨¡å‹è®­ç»ƒ"><a href="#æ¨¡å‹è®­ç»ƒ" class="headerlink" title="æ¨¡å‹è®­ç»ƒ"></a>æ¨¡å‹è®­ç»ƒ</h2><p>æœ¬æ¥è¦å­¦ä¹ mmdetectionå·¥å…·ç®±ï¼Œä½†æ˜¯æŠ˜è…¾å¾ˆä¹…å‘ç°ä¸æ”¯æŒcpuï¼Œå®‰è£…å¿…é¡»è¦æ±‚æœ‰cuda(gpu)ï¼Œå°±è½¬è€Œå­¦ä¹ yolov3çš„è®­ç»ƒï¼Œyolov3æ”¯æŒcpuå’Œgpuä¸¤ç§ï¼ŒåŸç†æœ‰ç›¸ä¼¼å¤„ï¼Œä¸è¿‡è¿™é‡Œæ€»ç»“yolov3çš„é…ç½®æ–¹æ³•ä¸è®­ç»ƒæ–¹æ³•ã€‚<br>ï¼ˆè¿˜æœ‰ä¹‹å‰è€å¸ˆè§†é¢‘æ˜¯ultralytics/yolov3ï¼Œä½†æ˜¯ç‰ˆæœ¬æ›´æ–°äº†ï¼Œä¹‹å‰å½•çš„è§†é¢‘è·‘å‡ºæ¥æŠ¥é”™ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼Œå°±æ”¹æˆäº†darknetçš„yolov3ï¼Œè§†é¢‘çš„æ•°æ®é›†å•Šå·®ä¸å¤šä¹Ÿèƒ½è·‘ï¼‰</p>
<h3 id="é…ç½®æ•°æ®é›†"><a href="#é…ç½®æ•°æ®é›†" class="headerlink" title="é…ç½®æ•°æ®é›†"></a>é…ç½®æ•°æ®é›†</h3><p>æŒ‰ç…§è§†é¢‘æ¥ï¼Œå¾ˆè¯¦ç»†ï¼Œä¸€çœ‹æ–‡ä»¶å°±ä¼šï¼š<br>æ”¾åœ¨æ ¹è·¯å¾„ä¸‹ï¼š<br><img src="/2020/02/12/Training-Yolov3/data.png" alt="data"></p>
<h3 id="é…ç½®config"><a href="#é…ç½®config" class="headerlink" title="é…ç½®config"></a>é…ç½®config</h3><h4 id="yolov3-cfg"><a href="#yolov3-cfg" class="headerlink" title="yolov3.cfg"></a>yolov3.cfg</h4><p>å®šä¹‰yolov3çš„ä¸€äº›æ¨¡å‹å‚æ•°ï¼Œæœ‰äº›å‚æ•°éœ€è¦è°ƒæ•´æ¯”å¦‚classes=6.filters=33å•¥çš„è§†é¢‘å¾ˆè¯¦ç»†ã€‚<br><img src="/2020/02/12/Training-Yolov3/cfg.png" alt="cfg"></p>
<h4 id="cards-data"><a href="#cards-data" class="headerlink" title="cards.data"></a>cards.data</h4><p>å®šä¹‰æ‰€æœ‰è‡ªå®šä¹‰å†…å®¹çš„è·¯å¾„<br><img src="/2020/02/12/Training-Yolov3/cards_data.png" alt="data"></p>
<h3 id="ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°"><a href="#ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°" class="headerlink" title="ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°"></a>ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°</h3><p>æˆ‘ä»¬è¿™é‡Œä¸‹è½½<code>darknet53.conv.74</code>æ”¾åˆ°æ ¹ç›®å½•ä¸‹ï¼Œä¹‹åæ ¹æ®é¢„å…ˆè®­ç»ƒæ¨¡å‹è¿›è¡Œä¸€äº›å‚æ•°è°ƒæ•´å°±ä¼šæ¯”è¾ƒå¿«</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://pjreddie.com/media/files/darknet53.conv<span class="number">.74</span></span><br></pre></td></tr></table></figure>

<h3 id="è®­ç»ƒæ¨¡å‹"><a href="#è®­ç»ƒæ¨¡å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹"></a>è®­ç»ƒæ¨¡å‹</h3><p>ä¸Šè¯‰ä¸‰ä¸ªæ­¥éª¤å®Œæˆä¹‹åï¼Œå°±å¯ä»¥è¿è¡Œä»£ç å¼€å§‹è®­ç»ƒ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./darknet detector train cfg/cards.data  cfg/yolov3.cfg  darknet53.conv<span class="number">.74</span></span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œä¸Šè¿°å‘½ä»¤å°±ä¼šå¼€å§‹è®­ç»ƒçš„ï¼Œä½†æ˜¯æˆ‘çš„ç”µè„‘å¤ªæ…¢ğŸ˜‚ï¼Œ16å¼ å›¾ç‰‡è®­ç»ƒè¦èŠ±5-10åˆ†é’Ÿï¼Œæ˜¨å¤©è®­ç»ƒå‡ ä¸ªå°æ—¶åªè®­ç»ƒäº†20ä¸ªbatchğŸ˜‚ï¼ŒåŒæ—¶darknetçš„è¾“å‡ºæ‰“å°ä¿¡æ¯ä¹Ÿéœ€è¦è¯»æ‡‚ï¼š</strong><br><img src="/2020/02/12/Training-Yolov3/log.png" alt="log"><br><strong>æ˜¨å¤©è®­ç»ƒå¾ˆä¹… æŸå¤±å¾ˆå¤§ iouå¾ˆå° classå¥‘åˆåº¦ä¹Ÿä¸é«˜ï¼Œä¸çŸ¥é“ä»€ä¹ˆåœ°æ–¹æœ‰é—®é¢˜ï¼Œç”±äºæ¨¡å‹è®­ç»ƒå¤ªæ…¢ï¼Œçœ‹äº†ä»£ç è®­ç»ƒ100ä¸ªbatchæ‰ä¼šåœ¨backupé‡Œä¿å­˜ä¸€æ¬¡æƒé‡ï¼Œä¹Ÿä¸çŸ¥é“å’‹æ”¹ã€‚</strong><br>å¦‚æœä¹‹ååœ¨é›†ç¾¤ä¸Šæ”¹ å¯ä»¥å¿«ç‚¹è·‘å‡ºç»“æœç„¶åå­¦ä¹ å¦‚ä½•è°ƒå‚æ•°</p>
<h3 id="æµ‹è¯•æ¨¡å‹"><a href="#æµ‹è¯•æ¨¡å‹" class="headerlink" title="æµ‹è¯•æ¨¡å‹"></a>æµ‹è¯•æ¨¡å‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./darknet detect cfg/yolov3.cfg yolov3.weights data/doa.jpg</span><br></pre></td></tr></table></figure>

<p>è®­ç»ƒå¥½æ¨¡å‹ä¹‹åå°±å¯ä»¥ä½¿ç”¨ç±»ä¼¼ä¸Šè¿°çš„å‘½ä»¤å¯¹ä¸€å¼ å›¾ç‰‡è¿›è¡Œç›®æ ‡æ£€æµ‹ï¼Œè‹¥è®­ç»ƒå¥½çš„æƒé‡å¯ä»¥æ¯”è¾ƒå¥½çš„è¯†åˆ«å›¾ç‰‡å°±å¯ä»¥å°½å¿ƒä¸‹ä¸€æ­¥ï¼Œå°†æ¨¡å‹éƒ¨ç½²åˆ°æˆ‘ä»¬çš„æœºå™¨ä¸Šé¢è¿›è¡Œæ±½è½¦è®¡æ•°ï¼ˆä¸Šè¿°æ˜¯yolov3çš„æƒé‡æ¯”è¾ƒå¥½çš„è¯†åˆ«ç‰©ä½“ï¼‰<br><img src="/2020/02/12/Training-Yolov3/predictions.jpg" alt="log"></p>
<h3 id="mmdetection"><a href="#mmdetection" class="headerlink" title="mmdetection"></a>mmdetection</h3><p>ç½‘ä¸Šå­¦äº†ä¸€äº›mmdetectionçš„åšæ–‡ï¼Œå®ƒç°åœ¨æ”¯æŒvocå’Œcocoæ•°æ®é›†æ ¼å¼ï¼ŒåŸç†å·®ä¸å¤šï¼Œçœ‹ç€æ“ä½œåº”è¯¥ä¸éš¾ï¼Œå…³é”®æ˜¯è‡ªå·±ç”µè„‘ä¸èƒ½å®‰è£…mmdetectionä¸èƒ½å®è·µã€‚<br><a href="https://blog.csdn.net/qq_36302589/article/details/86149293" target="_blank" rel="noopener">https://blog.csdn.net/qq_36302589/article/details/86149293</a><br>æ¯”è¾ƒç±»ä¼¼çš„å‘½ä»¤ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python tools/train.py &lt;CONFIG_FILE&gt; --gpus &lt;GPU_NUM&gt; --work_dir &lt;WORK_DIR&gt;</span><br><span class="line">python tools/test.py configs/cascade_rcnn_r101_fpn_1x.py ../work_dirs/cascade_rcnn_r101_fpn_1x/epoch_16.pth --gpus <span class="number">4</span> --out ./result/result_16.pkl --eval bbox --show</span><br></pre></td></tr></table></figure>

<p>æµç¨‹å¤§ä½“æ˜¯ï¼š<br><strong>æ”¾å¥½æ•°æ®é›†-&gt;é…ç½®é…ç½®æ–‡ä»¶-&gt;å‘½ä»¤è¡Œå¼€å§‹è®­ç»ƒ</strong><br>å…‰ä¼šä½¿ç”¨å¯èƒ½è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦å­¦ä¹ å†…éƒ¨ä»£ç æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ¯”å¦‚çœ‹äº†yolov3å‘ç°pythonçš„ä»£ç é‡Œé¢è¿˜æœ‰cè¯­è¨€ä»£ç ï¼Œä¸€äº›batchå•¥çš„ä»”ç»†çœ‹</p>
<h2 id="éƒ¨ç½²æ¨¡å‹"><a href="#éƒ¨ç½²æ¨¡å‹" class="headerlink" title="éƒ¨ç½²æ¨¡å‹"></a>éƒ¨ç½²æ¨¡å‹</h2><p>å°†è®­ç»ƒå¥½çš„æ¨¡å‹ ä½¿ç”¨opencvå®ç°ï¼Œ<br>åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªä½¿ç”¨yolov2æƒé‡çš„ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">cap = cv2.VideoCapture(<span class="string">'solidYellowLeft.mp4'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_cfg_model</span><span class="params">()</span>:</span></span><br><span class="line">    model_path = <span class="string">'/Users/suyapeng/Desktop/darknet/cfg/yolov2.weights'</span></span><br><span class="line">    cfg_path = <span class="string">'/Users/suyapeng/Desktop/darknet/cfg/yolov2.cfg'</span></span><br><span class="line">    yolo_net = cv2.dnn.readNet(model_path, cfg_path, <span class="string">'darknet'</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        flag, img = cap.read()</span><br><span class="line">        <span class="keyword">if</span> flag:</span><br><span class="line">            rows = img.shape[<span class="number">0</span>]</span><br><span class="line">            cols = img.shape[<span class="number">1</span>]</span><br><span class="line">            yolo_net.setInput(cv2.dnn.blobFromImage(img, <span class="number">1.0</span>/<span class="number">127.5</span>, (<span class="number">416</span>, <span class="number">416</span>), (<span class="number">127.5</span>, <span class="number">127.5</span>, <span class="number">127.5</span>), <span class="literal">False</span>, <span class="literal">False</span>))</span><br><span class="line">            cvOut = yolo_net.forward()</span><br><span class="line">            <span class="keyword">for</span> detection <span class="keyword">in</span> cvOut:</span><br><span class="line">                confidence = np.max(detection[<span class="number">5</span>:])</span><br><span class="line">                <span class="keyword">if</span> confidence &gt; <span class="number">0</span>:</span><br><span class="line">                    classIndex = np.argwhere(detection == confidence)[<span class="number">0</span>][<span class="number">0</span>] - <span class="number">5</span></span><br><span class="line">                    x_center = detection[<span class="number">0</span>] * cols</span><br><span class="line">                    y_center = detection[<span class="number">1</span>] * rows</span><br><span class="line">                    width = detection[<span class="number">2</span>] * cols</span><br><span class="line">                    height = detection[<span class="number">3</span>] * rows</span><br><span class="line">                    start = (int(x_center - width/<span class="number">2</span>), int(y_center - height/<span class="number">2</span>))</span><br><span class="line">                    end = (int(x_center + width/<span class="number">2</span>), int(y_center + height/<span class="number">2</span>))</span><br><span class="line">                    cv2.rectangle(img,start, end , (<span class="number">23</span>, <span class="number">230</span>, <span class="number">210</span>), thickness=<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        cv2.imshow(<span class="string">'show'</span>, img)</span><br><span class="line">        cv2.waitKey(<span class="number">10</span>)</span><br><span class="line">        </span><br><span class="line">read_cfg_model()</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œäº†ä¸€ä¸‹ï¼Œæ˜¯å¯ä»¥å®ç°çš„ï¼Œåªä¸è¿‡è¿™ä¸ªä¾‹å­æ•ˆæœæ¯”è¾ƒå·®ï¼Œåˆ°æ—¶å€™å¯ä»¥å°½é‡è®­ç»ƒå¥½æˆ‘ä»¬çš„æ¨¡å‹ã€‚<br><strong>ä¸»è¦æ˜¯opencvçš„åŠ è½½æ·±åº¦å­¦ä¹ æ¨¡å‹çš„api:cv2.dnn.readNet</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yolo_net = cv2.dnn.readNet(model_path, cfg_path, <span class="string">'darknet'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2020/02/12/Training-Yolov3/png.png" alt="png"><br>ç°åœ¨å®˜ç½‘æ›´æ–°äº†apiï¼Œæ”¯æŒå¤šç§æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼š<br><img src="/2020/02/12/Training-Yolov3/dnn.png" alt="png"></p>
<p><strong>æ¬¡è¦æ˜¯è°ƒå–videoCapture()è·å–æ‘„åƒå¤´å¸§å¹¶è¿›è¡Œæ£€æµ‹</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.VideoCapture(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p><strong>å¤§ä½“å°±èƒ½å®Œæˆç›®æ ‡æ£€æµ‹çš„æµç¨‹ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦å»å®è·µå¤„ç†ï¼Œåˆ°æ—¶å€™æœ‰äº†gpué›†ç¾¤è®­ç»ƒå¿«ä¸€ç‚¹å†æ¥ä¿®æ”¹è¶…å‚æ•°å­¦ä¹ ä¹Ÿè®¸ç†è§£åº”ç”¨æ›´æ·±åˆ»ï¼Œç°åœ¨åœ¨ç†è®ºä¸Šä¸²è”èµ·æ¥ï¼ˆå®è·µä½¿ç”¨mmdetectionï¼Œç°åœ¨æ˜¯yoloï¼‰ã€‚</strong></p>

    </div>

    
    
    
        
      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2020/02/11/Don-t-Starve/" rel="next" title="Don't Starve">
                  <i class="fa fa-chevron-left"></i> Don't Starve
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2020/02/17/Gitå­¦ä¹ /" rel="prev" title="Gitå­¦ä¹ ">
                  Gitå­¦ä¹  <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰"><span class="nav-number">1.</span> <span class="nav-text">è®­ç»ƒYolov3ï¼ˆæ·±åº¦å­¦ä¹ æµç¨‹ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æ•°æ®é›†"><span class="nav-number">1.1.</span> <span class="nav-text">æ•°æ®é›†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“"><span class="nav-number">1.1.1.</span> <span class="nav-text">ä¸åŒæ ¼å¼çš„æ•°æ®é›†æ€»ç»“</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PASCAL-VOC"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">PASCAL VOC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#COCO"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">COCO</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#YOLO"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">YOLO</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨labelImageæ ‡æ³¨"><span class="nav-number">1.1.2.</span> <span class="nav-text">ä½¿ç”¨labelImageæ ‡æ³¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¨¡å‹è®­ç»ƒ"><span class="nav-number">1.2.</span> <span class="nav-text">æ¨¡å‹è®­ç»ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#é…ç½®æ•°æ®é›†"><span class="nav-number">1.2.1.</span> <span class="nav-text">é…ç½®æ•°æ®é›†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é…ç½®config"><span class="nav-number">1.2.2.</span> <span class="nav-text">é…ç½®config</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#yolov3-cfg"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">yolov3.cfg</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cards-data"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">cards.data</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°"><span class="nav-number">1.2.3.</span> <span class="nav-text">ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è®­ç»ƒæ¨¡å‹"><span class="nav-number">1.2.4.</span> <span class="nav-text">è®­ç»ƒæ¨¡å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æµ‹è¯•æ¨¡å‹"><span class="nav-number">1.2.5.</span> <span class="nav-text">æµ‹è¯•æ¨¡å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mmdetection"><span class="nav-number">1.2.6.</span> <span class="nav-text">mmdetection</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#éƒ¨ç½²æ¨¡å‹"><span class="nav-number">1.3.</span> <span class="nav-text">éƒ¨ç½²æ¨¡å‹</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1570163730249&di=dcd36b04d1066a90ddb1f132ae3a6bcc&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Ffe60497fd762440686b6d5702c2c9f19df71fb9911009-LVWEJj_fw658"
      alt="æœ›æ˜Ÿçš„å¤ªé˜³èŠ±">
  <p class="site-author-name" itemprop="name">æœ›æ˜Ÿçš„å¤ªé˜³èŠ±</p>
  <div class="site-description" itemprop="description">You are my JavaSript in my HTML.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/yourname" title="GitHub &rarr; https://github.com/yourname" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:1186179435@qq.com" title="E-Mail &rarr; mailto:1186179435@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æœ›æ˜Ÿçš„å¤ªé˜³èŠ±</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.4.1</div>

        












        
      </div>
    </footer>
  </div>

  
    
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/muse.js?v=7.4.1"></script>

<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
